## 为什么要备份
- 灾难恢复
- 改变了想法，想恢复
- 审计：要知道数据在过去的某个时间点时什么样的
- 测试
## 定义备份需求
- 备份和恢复策略有两个重要的需求：恢复点目标（RPO）和恢复时间目标（RTO）
1. 在不导致严重后果的情况下,可以容忍丢失多少数据?需要故障恢复,还是可以接受自从上次日常备份后所有的工作全部丢失?是否有法律法规的要求?
2. 恢复需要在多长时间内完成?哪种类型的宕机是可接受的?哪种影响(例如,部分服务不可用)是应用和用户可以接受的?当那些场景发生时,又该如何持续服务?
3. 需要恢复什么?常见的需求是恢复整个服务器,单个数据库,单个表,或仅仅是特定的事务或语句
- ==复制不是备份==
## 设计MySQL备份方案
建议：
1. 生产中，物理备份时必须的，逻辑备份太慢且受到资源限制。基于快照的备份，perconda xtrabackup 和 MySQL enterprise backup时最好的选择
2. 保留多个备份集
3. 定期从逻辑备份（物理备份）抽取数据进行恢复测试
4. 保存二进制日志以用于基于故障时间点的恢复。expire_logs_days应该设置足够长，保证可以从最近两次物理备份中做基于时间点的恢复
5. 完全不借助备份工具本身来监控备份和恢复的过程，需要另外验证备份是否正常
6. 通过演练恢复过程测试备份和恢复，测算恢复所需要的资源（cpu，磁盘，实际时间，网络带宽等）
#### 在线备份还是离线备份
- 如果可能关闭MySQL做备份是最简单和安全的，一致性最好
#### 逻辑备份还是物理备份
#### 备份什么
#### 存储引擎和一致性
## 管理和备份的二进制日志
#### 二进制日志格式
#### 安全地清楚老的二进制日志
## 备份数据
#### 生成逻辑备份
#### 文件系统快照
## 从备份中恢复
##### 恢复物理备份
#### 还原逻辑备份
#### 基于时间点的恢复
#### 更高级的恢复技术
#### innodb的崩溃恢复
## 备份和恢复工具
#### MySQL Enterprise Backup
#### percona xtrabackup
#### mylvmbackup
#### zmanda recovery manager
#### mydumper
#### mysqldump
## 备份脚本化