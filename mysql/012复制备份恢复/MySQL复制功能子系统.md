MySQL Replication的设计思想是尽可能及时精确地将相同操作在其他MySQL数据库服务器上完成复制并再次执行
- 单向复制与合并复制
1. MySQL Replication 采用单向复制,即所有的更新都先发生在主服务器端,然后再复制给从服务器,从服务器上的信息是只读的
2. 合并复制是一些高级数据库复制系统所采用的一种方式,它支持同时对多个主服务器进行读写操作,并使用合并复制机制将这些更新统一,将最终的结果传递给从服务器
- 同步复制与异步复制
1. 同步复制(Synchronous  Replication)是指所有的请求操作都发生在主/从服务器端,改变被同时提交到两个数据库中,操作也被同时写入到日志文件中,最后才把结果返回给用户,两端的数据库始终保持同步
2. 异步复制[Asynchronous Replication]是指将发来的请求先在主服务器端执行,执行办完将结果返回给用户,同时将操作记录下来,然后再将更新的记录传递给从服务器,完成更新,这存在着时间差

#### Replication 基础架构描述
最基础的架构就是主从架构
1. 主服务器负责维护原始数据库信息
2. 从服务器负责维护原始数据库指定的复制副本
3. 一个主服务器可以为一个或多个从服务器提供副本的复制服务,但是每个从服务器只能对应一台主服务器(MySQL不支持多主服务器的复制功能),即不支持合并复制方式
#### Replication 原理简述
Replication通过3个简单的过程来实现,其中一个过程发生在主服务器上,另外两个过程发生在从服务器上,具体描述如下：
1. 主服务器将用户对数据库做的改变操作以二进制的格式记录到一个称作Binary Log的二进制日志文件里,然后由一个叫作Binlog Dump线程将日志中的内容传给从服务器
2. 从服务器则通过一个IO线程将主服务器上的二进制日志文件中的操作事件,复制到本地的-一个称作Relay Log的中继日志文件中
3. 从服务器再通过另一个SQL线程将操作依次顺序地在本地执行,从而实现了主从之间的数据同步

![Replication复制原理](pic/MySQL%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD%E5%AD%90%E7%B3%BB%E7%BB%9F.png)

#### Replication复制线程
- binlog dump线程：负责将主服务器上的二进制文件内容发送给服务器的IO线程，同时给每一个要传输的事件加锁。show processlist可查看该线程是否运行
- IO线程：当服务器端执行start slave之后，便会运行一个IO线程。IO线程与主服务器建立一个连接，同时向主服务器发送更新请求，之后IO线程会将传递过来的更新复制到本地Relay log的日志文件中。通过 show slave status查看IO状态