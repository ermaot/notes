## 日期和时间类型
参考来源：
- MYSQL技术内幕：姜承尧<br>
### 5种日期与时间类型

类型 | 长度（字节）|表示范围
---|---|---
datetime | 8|1000-01-01 00:00:00 ~ 9999-12-31 23:59:59
date | 3|1000-01-01  ~ 9999-12-31 
timestamp | 4|
year | 1|
time | 3|

- ==对日期格式很宽松，有歧义情况下，选择离当前近的时间==<br>

2011-10-11 10:08:08<br> | 
---|
2011/10/11 10+08+08<br> | 
20111011100808 | 
==11/01/01 10@08@08==（选择显示2011-01-01 ） | 

- 微秒级别会被截断
```
mysql>create table a ( t datetime);
mysql>insert into a values("2017-11-22 10:10:10.12345678");
mysql> select * from a;
+---------------------+
| t                   |
+---------------------+
| 2017-11-22 10:10:10 |
+---------------------+
1 row in set (0.01 sec)
```
- CAST函数支持微秒(mysql>5.7不支持)，但插入时候会被截断

```
mysql> select cast("2017-11-22 10:10:10.12345678" as datetime);
+--------------------------------------------------+
| cast("2017-11-22 10:10:10.12345678" as datetime) |
+--------------------------------------------------+
| 2017-11-22 10:10:10                              |
+--------------------------------------------------+
```
- microsecond提取datetime中的微秒数（可以看到支持6位，且四舍五入）

```
mysql> select microsecond("2017-11-22 10:10:10.12345678" );
+----------------------------------------------+
| microsecond("2017-11-22 10:10:10.12345678" ) |
+----------------------------------------------+
|                                       123457 |
+----------------------------------------------+
```
- NOW,CURRENT_TIMESTAMP,SYSDATE<br>
1. now()与CURRENT_TIMESTAMP()同义，结果是当前语句开始执行的时间<br>
2. SYSDATE()是执行到该函数的时间
- 三者比较
```
mysql> select now(),current_TIMESTAMP(),SYSDATE(),sleep(2),now(),current_TIMESTAMP(),SYSDATE();
+---------------------+---------------------+---------------------+----------+---------------------+---------------------+---------------------+
| now()               | current_TIMESTAMP() | SYSDATE()           | sleep(2) | now()               | current_TIMESTAMP() | SYSDATE()           |
+---------------------+---------------------+---------------------+----------+---------------------+---------------------+---------------------+
| 2018-11-27 00:03:04 | 2018-11-27 00:03:04 | 2018-11-27 00:03:04 |        0 | 2018-11-27 00:03:04 | 2018-11-27 00:03:04 | 2018-11-27 00:03:06 |
+---------------------+---------------------+---------------------+----------+---------------------+---------------------+---------------------+
```
- now，current_timestamp(函数加数值，显示成字符串)
```
mysql> select now(),current_timestamp(),now()+2 ,current_timestamp()+4;
+---------------------+---------------------+----------------+-----------------------+
| now()               | current_timestamp() | now()+2        | current_timestamp()+4 |
+---------------------+---------------------+----------------+-----------------------+
| 2018-11-27 11:14:33 | 2018-11-27 11:14:33 | 20181127111435 |        20181127111437 |
+---------------------+---------------------+----------------+-----------------------+
```
- date_add, date_sub与闰月(对应的该闰月最后一天；interval可以为正也可以为负)

```
mysql> select date_add(now() ,interval 1 day) ,date_sub(now(),interval -1 day),date_add('2000-02-29',interval 1 year);
+---------------------------------+---------------------------------+----------------------------------------+
| date_add(now() ,interval 1 day) | date_sub(now(),interval -1 day) | date_add('2000-02-29',interval 1 year) |
+---------------------------------+---------------------------------+----------------------------------------+
| 2018-11-28 11:17:47             | 2018-11-28 11:17:47             | 2001-02-28                             |
+---------------------------------+---------------------------------+----------------------------------------+
```
- curtime(),curdate

```
mysql> select curtime(),curdate();
+-----------+------------+
| curtime() | curdate()  |
+-----------+------------+
| 11:22:05  | 2018-11-27 |
+-----------+------------+
```
- 格式化函数date_format()（y:两位数年;Y:四位数年；M:英文月;D:th格式日表示分钟用i，表示小时用I或者h/H）

```
mysql> select date_format(now(),"%y-%m-%d %h-%i-%s"),date_format(now(),"%Y-%M-%D %H-%i-%S");
+----------------------------------------+----------------------------------------+
| date_format(now(),"%y-%m-%d %h-%i-%s") | date_format(now(),"%Y-%M-%D %H-%i-%S") |
+----------------------------------------+----------------------------------------+
| 18-11-27 11-28-08                      | 2018-November-27th 11-28-08            |
+----------------------------------------+----------------------------------------+
```

