本文参考https://blog.csdn.net/vanbreaker/article/details/7605367

linux不断分配与回收不同大小的内存块，容易产生内存碎片的问题。Linux内核内存管理的一项重要工作就是如何在频繁申请释放内存的情况下，避免碎片的产生。Linux采用伙伴系统解决外部碎片的问题，采用slab解决内部碎片的问题。

#### 碎片类型
##### 内部碎片
当一个进程装入到固定大小的分区块（比如页）时，假如进程所需空间小于分区块，则分区块的剩余的空间将无法被系统使用，称为内部碎片（internal fragmentation）。
##### 外部碎片
当空闲内存被分成小区块，分别为不同的进程所使用时，便会出现外部碎片（external fragmentation）。这种情况下，虽然空闲空间足够大，但是程序没法使用，因为剩余空间被分成了大大小小的区块，没有一块能够大到程序可以使用。

#### 碎片解决方法
一种是之前介绍过的利用非连续内存的分配；另外一种则是用一种有效的方法来监视内存，保证在内核只要申请一小块内存的情况下，不会从大块的连续空闲内存中截取一段过来，从而保证了大块内存的连续性和完整性。第一种存在两个问题：一来用来映射非连续内存线性地址空间有限，二来每次映射都要改写内核的页表，进而就要刷新TLB，这使得分配的速度大打折扣。
